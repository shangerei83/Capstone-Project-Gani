<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout/base}">
<head>
    <title>Checkout - GaniMart</title>
</head>
<body>
<div layout:fragment="content">
    <section class="panel split">
        <div class="stack">
            <h3>Shipping Information</h3>
            <form th:action="@{/checkout}" method="post" class="form stack">
                <div class="row">
                    <div class="field" style="flex:1;">
                        <label>Email</label>
                        <input type="email" name="email" required />
                    </div>
                    <div class="field" style="flex:1;">
                        <label>Full name</label>
                        <input type="text" name="fullName" required />
                    </div>
                </div>
                <div class="field">
                    <label>Address</label>
                    <input type="text" name="address" required />
                </div>
                <div class="row">
                    <div class="field" style="flex:1;">
                        <label>City</label>
                        <input type="text" name="city" required />
                    </div>
                    <div class="field" style="flex:1;">
                        <label>State</label>
                        <input type="text" name="state" />
                    </div>
                </div>
                <div class="row">
                    <div class="field" style="flex:1;">
                        <label>Postal Code</label>
                        <input type="text" name="postalCode" />
                    </div>
                    <div class="field" style="flex:1;">
                        <label>Country</label>
                        <input type="text" name="country" required />
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Place Order</button>
            </form>
        </div>
        <div class="stack">
            <h3>Order Summary</h3>
            <div class="card" th:if="${cartItems != null and !cartItems.isEmpty()}">
                <div th:each="item : ${cartItems}" class="row" style="justify-content: space-between;">
                    <span th:text="${item.title}">Product</span>
                    <span th:text="${item.quantity + ' x $' + #numbers.formatDecimal(item.unitPrice, 1, 2)}">1 x $0.00</span>
                </div>
                <hr />
                <div class="row" style="justify-content: space-between;">
                    <span>Subtotal</span>
                    <span th:text="${'$' + #numbers.formatDecimal(cartSummary.subtotal, 1, 2)}">$0.00</span>
                </div>
                <div class="row" style="justify-content: space-between;">
                    <span>Shipping</span>
                    <span th:text="${'$' + #numbers.formatDecimal(cartSummary.shipping, 1, 2)}">$0.00</span>
                </div>
                <div class="row" style="justify-content: space-between;">
                    <span>Tax</span>
                    <span th:text="${'$' + #numbers.formatDecimal(cartSummary.tax, 1, 2)}">$0.00</span>
                </div>
                <div class="row" style="justify-content: space-between; font-weight: 600;">
                    <span>Total</span>
                    <span th:text="${'$' + #numbers.formatDecimal(cartSummary.total, 1, 2)}">$0.00</span>
                </div>
            </div>
            <div class="card" th:if="${cartItems == null or cartItems.isEmpty()}">
                <p class="muted">Your cart is empty.</p>
            </div>
        </div>
    </section>
</div>
</body>
</html>
